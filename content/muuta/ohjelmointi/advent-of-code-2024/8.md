---
title: "Advent of Code 2024: 8. päivä"
linkTitle: "8. päivä"
lastmod: 2024-12-08T14:54:00+02:00
summary: "Signaaleeja, antinodeja ja koordinaatteja."
---
### Ensimmäinen osa
Ruudukoita hyödyntävät koordinaattipulmat tuntuvat olevan suosiossa, sillä myös tänään oli tarjolla sellainen.

Ruudukkoon on merkitty antenneja, jotka lähettävä signaalia eri taajuuksilla. Kaksi samalla taajuudella toimivaa antennia muodostavat antinoden, joka on päinvastaisessa suunnassa, mutta yhtä kaukana kuin kaksi antennia. Esimerkki selventänee ongelmaa.

{{< highlight text >}}  
..........
...#......
..........
....a.....
..........
.....a....
..........
......#...
..........
..........
{{< /highlight >}}

Alla olevassa ruudukossa on kaksi `a`-signaalia lähettävää antennia. Jos katsomme antennien sijaintia, kulkemalla alemmasta antennissa yhden vasemmalle ja kaksi ylös, päädymme ylempään a-antenniin. Jos nyt jatkamme ylemmästä antennissa yhden vasemmalle ja kaksi ylös, tähän pisteeseen syntyy ensimmäinen antinode, joka on merkitty `#`-merkillä. Toisaalta myös alas syntyy antinode, mutta koska se on päinvastaisessa suunnassa, meidän on liikuttava yksi oikealle ja kaksi alas.

Alla olevassa ruudukossa on lisätty kolmas `a`-antenni. Koska tämä antenni synnyttää kaksi antinodea molempien aikaisempien antennien kanssa, tuloksena on neljä uutta antinodea. Kaksi niistä on kuitenkin niin kaukana, että ne menevät kartalta ulos, joten vain kaksi on näkyvissä.

{{< highlight text >}}
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......#...
..........
..........
{{< /highlight >}}

Huomionarvoista on, että antinodet voivat tulla myös toisenlaista taajuutta lähettävän antennin päälle. Alla olevassa esimerkissä yksinäinen `A`-signaalia lähettävä antenni ei synnytä antinodea, mutta sen sijainnissa on `a`-antennien synnyttämä haamusignaali.

{{< highlight text >}}
..........
...#......
#.........
....a.....
........a.
.....a....
..#.......
......A...
..........
..........
{{< /highlight >}}

Tehtävänä on selvittää, kuinka monessa *yksilöllisess* sijainnissa antinodeja esiintyy.

Itselleni jäi hieman epäselväksi, voivatko haamusignaalit syntyä myös samaa signaalia lähettävien antennien päälle. Tehtävänanto toteaa vain, että ne voivat ilmestyä sijainteihin, joissa on antenni, joten oletin, että kyllä voivat.

Tämä tuntui tehtävältä, jossa yksinkertainen brute-force -menetelmä voisi toimia. Ajattelin aluksi kerätä jokaisen antennin sijainnin, mutta ryhmitellä ne signaalien mukaan. Tähän sopii tuttu `map`-tietorakenne: `map[string][]Point2D`. Avaimena olisi signaalin merkki ja arvona koordinaatiopiste.

Tämän jälkeen voisin ryhmän sisällä verrata jokaista antennia jokaiseen toiseen antenniin, luoda niiden antinodet kahteen suuntaan ja kirjata koordinaatit ylös. Mikäli signaali menee kartasta pihalle, sen voisi hylätä. Koska tehtävänannossa puhutaan *yksilöllisistä* antinodeista, voisin hylätä myös sellaiset antinodet, jotka ilmestyvät sijaintiin, jossa on jo ennestään antinode.

Koodin väkertäminen oli varsin suoraviivaista ja sain suoraan oikean tuloksen.

### Toinen osa

Toisessa osassa tilanne muuttuu niin, että nyt antennit eivät synnytäkään vain kahta antinodea, vaan ne synnyttävät useita niin pitkälle kun kartassa on tilaa. Tässä on esimerkki kartasta, jossa on kolme T-signaalia lähettävää antennia ja niiden antinodet `#`.

{{< highlight text >}}
T....#....
...T......
.T....#...
.........#
..#.......
..........
...#......
..........
....#.....
..........
{{< /highlight >}}

Äkkiseltään tämä tuntui varsin pieneltä muutokselta omaan koodiin. Siinä missä ykkösosassa generoidaan vain kaksi pistettä, voisin tehdä sen nyt jonkinlaisen loopin sisällä, joka jatkuisi niin pitkään, kunnes kartan reunat tulisivat vastaan.

Testasin päivitetyn koodin testisyötteellä, mutta lukumäärä oli liian pieni. Tajusin heti, että unohdin sen yksityiskohdan, että myös antennien sijainnit itsessään ovat antinodeja. Pieni muutos koodiin ja nyt sain oikean vastauksen testisyötteestä. Ajelin saman koodin oikealla syötteellä ja sieltähän putkahti oikea lopputulos alle millisekunnissa!

{{< highlight shell >}}
$ go run . -d 8 -s 1
Day 8 / Step 1 result: 305
Execution time 561.041µs

$ go run . -d 8 -s 2
Day 8 / Step 2 result: 1150
Execution time 613.292µs
{{< /highlight >}}

- [Haastesivu](https://adventofcode.com/2024/day/8)
- [Ratkaisun koodi](https://github.com/saaste/advent-of-code-2024/blob/main/pkg/puzzle/8.go)